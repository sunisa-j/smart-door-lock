<ion-view view-title="Doors">
    <ion-content>

        <div ng-repeat="(groupKey, group) in doorsAccessData">
            <div class="item item-divider">{{group.name}}</div>
            <div class="row flex-wrap">
                <div ng-repeat="(doorKey, doorData) in group.doorsAccess" class="door-custom-row" ng-class="{'royal-bg': (doorData.status.door=='opened')&&(doorData.status.lock=='locked')}"
                     ui-sref="mainMenu.doors.doorInfo({groupId: groupKey, doorId: doorKey})" ng-init="load[doorKey]=false">

                    <div class="custom-row-icon" ng-show="doorData.permission.viewStatus==false">
                        <i class="flaticon-closed42"></i>
                    </div>
                    <div class="custom-row-icon" ng-show="doorData.permission.viewStatus==true">
                        <div class="door-status-icon" ng-hide="load[doorKey]==true">
                            <i class="ion-ios-locked assertive" ng-show="doorData.status.lock=='locked'"></i>
                            <i class="ion-ios-unlocked balanced" ng-show="doorData.status.lock=='unlocked'"></i>
                        </div>
                        <i class="flaticon-open203" ng-show="doorData.status.door=='opened'"></i>
                        <i class="flaticon-closed42" ng-show="doorData.status.door=='closed'"></i>
                    </div>

                    <div class="custom-row-title" ui-sref="mainMenu.doors.doorInfo({groupId: group.$id, doorId: doorData.$id})">
                        <div>{{doorData.name}}</div>
                        <div class="custom-row-desc">{{doorData.desc}}</div>
                    </div>

                    <div class="custom-row-button" ng-show="(doorData.permission.remoteControl==true)&&(load[doorKey]==false)">
                        <button class="button button-outline button-small button-dark" ng-click="changeLockStatus($event, groupKey, doorKey, doorData.status.lock)">
                            <span ng-show="doorData.status.lock=='unlocked'">Lock</span>
                            <span ng-show="doorData.status.lock=='locked'">Unlock</span>
                        </button>
                    </div>
                    <div class="custom-row-spinner" ng-show="load[doorKey]==true">
                        <ion-spinner class="spinner-energized" icon="ripple"></ion-spinner>
                    </div>

                </div>
            </div>
        </div>

    </ion-content>
</ion-view>
